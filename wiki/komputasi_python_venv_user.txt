# Komputasi Python dengan Python venv User

Pada sistem ALELEON Supercomputer, sangat disarankan bagi pengguna untuk menggunakan **Virtual Environment (`venv`)** ketika melakukan manajemen paket atau pustaka Python. Penggunaan `venv` mencegah terjadinya konflik versi *library* antar proyek komputasi dan menjaga integritas dari *environment* Python utama sistem (OS).

## Prasyarat

Sebelum membuat *virtual environment*, pastikan Anda sudah memuat (*load*) modul versi Python yang ingin digunakan.
Sebagai contoh, memuat Python versi 3.10.8:

```bash
module load python/3.10.8

```

## Langkah-langkah Pembuatan dan Penggunaan venv

1. **Buat direktori proyek** (Sangat disarankan untuk kerapian data):
```bash
mkdir -p ~/proyek_python_saya
cd ~/proyek_python_saya

```


2. **Buat virtual environment**:
Jalankan perintah berikut untuk menginisialisasi environment baru. Anda dapat mengganti kata `env` dengan nama environment yang Anda inginkan.
```bash
python -m venv env

```


3. **Aktivasi virtual environment**:
```bash
source env/bin/activate

```


*Indikator `(env)` akan muncul di sisi kiri baris perintah terminal Anda, menandakan environment telah aktif.*
4. **Instalasi paket/library Python**:
Saat environment aktif, gunakan `pip` untuk menginstal paket yang dibutuhkan proyek Anda (contoh: `numpy` dan `pandas`).
```bash
pip install numpy pandas

```


5. **Deaktivasi virtual environment**:
Jika Anda sudah selesai bekerja dan ingin keluar dari *virtual environment*, cukup ketik:
```bash
deactivate

```



---

## ⚠️ Catatan Penting Terkait Storage

* **Keterbatasan Kuota `/home`:** Berbagai *library* Python (terutama pustaka *machine learning/deep learning* seperti PyTorch, TensorFlow, dll) memakan ruang penyimpanan yang cukup besar.
* **Gunakan `/workdir`:** Sangat direkomendasikan untuk menempatkan direktori proyek dan *virtual environment* (`venv`) Anda di dalam `/workdir/$USER` alih-alih di direktori `/home`, guna menghindari penuhnya kuota *home directory* Anda.

---

## Penggunaan venv pada Script Job SLURM

Untuk menjalankan komputasi Anda melalui *job scheduler* SLURM menggunakan library yang telah diinstal di `venv`, Anda harus memastikan modul Python dimuat kembali dan environment diaktifkan di dalam *submission script* (`.sh`) Anda.

**Contoh Script `job_komputasi.sh`:**

```bash
#!/bin/bash
#SBATCH --job-name=uji_python_venv
#SBATCH --output=hasil_%j.out
#SBATCH --error=error_%j.err
#SBATCH --nodes=1
#SBATCH --ntasks=1
#SBATCH --cpus-per-task=4
#SBATCH --mem=16G
#SBATCH --partition=epyc

# 1. Memuat modul python yang sama persis saat venv dibuat
module load python/3.10.8

# 2. Mengaktifkan virtual environment
source /workdir/$USER/proyek_python_saya/env/bin/activate

# 3. Menjalankan script python komputasi Anda
python script_utama.py

# 4. Menonaktifkan virtual environment (Opsional pada akhir script)
deactivate

```

---
